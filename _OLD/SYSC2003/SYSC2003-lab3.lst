C:\Users\Admin\Documents\SYSC2003-lab3.lst - generated by MGTEK Assembler ASM12 V1.26 Build 144 for WIN32 (x86) - Thu Jan 26 15:13:18 2017

    1:                                 
    2:                                 
    3:                                 
    4:                                 
    5:          =00000200                 org $0200
    6:                                    ;MSG     FCC   'Hello World\0'
    7:                                 
    8:          =00000008                 testThing: EQU 08
    9:                                    ;actuallyZero: EQU 0
   10:                                 
   11:                                 
   12:     0200 +0008                     newArray:    fill     testThing, 'A'
   13:                                 
   14:     0208 0064 0064 0064            newWordArray:  dw 100, 100, 100, 100, 100, 100, 100, 100
           020E 0064 0064 0064 
           0214 0064 0064 
   15:                                    
   16:                                    
   17:     0218 01                        byteArg:   db 1
   18:     0219 0001                      wordArg:   dw 1
   19:                                    
   20:     021B 01                        byteArg1:   db 1
   21:     021C 01                        byteArg2:   db 1
   22:     021D 0001                      wordArg1:   dw 1
   23:     021F 0001                      wordArg2:   dw 1
   24:                                    
   25:     0221 01                        bytePointerArg1:  db 1
   26:     0222 0001                      wordPointerArg1:  dw 1
   27:                                    
   28:                                    
   29:                                    
   30:                                 
   31:                                 
   32:                                 
   33:                                 
   34:                                    ;void f1();
   35:     0224                           f1:
   36:     0224 3D                        RTS
   37:                                 
   38:                                    ;void f2 (byte arg);
   39:     0225                           f2:
   40:     0225 3D                        RTS
   41:                                    
   42:                                    ;void f3(word arg);
   43:     0226                           f3:
   44:     0226 EC 82                     LDD 2, SP
   45:     0228 3D                        RTS
   46:                                    
   47:                                    ;void f4(byte arg1, byte arg2)
   48:     0229                           f4:
   49:     0229 A6 82                     LDAA 2, SP
   50:     022B 3D                        RTS
   51:                                    
   52:                                    ;void f5(word arg1, word arg2);
   53:     022C                           f5:
   54:     022C EE 82                     LDX 2, SP ;arg1
   55:     022E ED 84                     LDY 4, SP ;arg2
   56:     0230 3D                        RTS
   57:                                    
   58:                                    ;byte f6(void);
   59:     0231                           f6:
   60:     0231 3D                        RTS
   61:                                    
   62:                                    ;word f7 (byte arg)
   63:     0232                           f7:
   64:     0232 A6 84                     LDAA 4, SP
   65:     0234 6C 82                     STD 2, SP
   66:     0236 3D                        RTS
   67:                                    
   68:                                    ;byte f8(word arg);
   69:     0237                           f8:
   70:     0237 3D                        RTS
   71:                                    
   72:                                    ;word f9(byte arg1, byte arg2)
   73:     0238                           f9:
   74:     0238 A6 82                     LDAA 2, SP ;arg1
   75:     023A E6 83                     LDAB 3, SP ;arg2
   76:     023C 3D                        RTS
   77:                                    
   78:                                    ;byte f10(word arg1, word arg2);
   79:     023D                           f10:
   80:     023D EE 83                     LDX 3, SP ;arg1
   81:     023F ED 85                     LDY 5, SP ;arg2
   82:     0241 6A 82                     STAA 2, SP ;return value
   83:     0243 3D                        RTS
   84:                                    
   85:                                    ;void f11(byte *arg1, word arg2);
   86:     0244                           f11:
   87:     0244 EE 82                     LDX 2, SP ;arg1
   88:     0246 ED 84                     LDY 4, SP ;arg2
   89:     0248 3D                        RTS
   90:                                    
   91:                                    ;byte f12(word *arg1, byte arg2);
   92:     0249                           f12:
   93:     0249 EE 83                     LDX 3, SP ;arg1
   94:     024B A6 85                     LDA 5, SP ;arg2
   95:     024D 6A 82                     STAA 2, SP ;return
   96:     024F 3D                        RTS
   97:                                 
   98:                                 
   99:          =00004000                 org $4000
  100:                                 
  101:     4000 CE 0200                   LDX #newArray
  102:     4003 86 00                     LDA #0
  103:     4005 6A 07                     STA 7, X
  104:     4007 CF 3DFF                   LDS #$3DFF
  105:                                 
  106:                                 
  107:                                    
  108:     400A CE 0208                   LDX #newWordArray
  109:     400D C6 00                     LDB #0
  110:     400F CD 0008                   LDY #testThing
  111:                                    
  112:                                    
  113:                                    
  114:     4012                           loopingNToZero:
  115:     4012 6D E5                     STY B, X
  116:     4014 52                        INCB
  117:     4015 52                        INCB
  118:                                    
  119:     4016 04 36 F9                  DBNE Y, loopingNToZero
  120:                                    
  121:                                    
  122:                                 
  123:     4019 16 0224                   jsr f1
  124:                                    
  125:     401C F6 0218                   LDAB byteArg 
  126:     401F 16 0225                   jsr f2
  127:                                    
  128:     4022 FC 0219                   LDD wordArg
  129:     4025 3B                        PSHD
  130:     4026 16 0226                   jsr f3
  131:     4029 3A                        PULD ;Just to keep the stack small. Otherwise you would decrement the SP by 2 (?)
  132:                                    
  133:     402A F6 021B                   LDAB byteArg1
  134:     402D B6 021C                   LDAA byteArg2
  135:     4030 36                        PSHA
  136:     4031 16 0229                   jsr f4
  137:     4034 32                        PULA
  138:                                    
  139:     4035 FC 021F                   LDD wordArg2
  140:     4038 3B                        PSHD
  141:     4039 FC 021D                   LDD wordArg1
  142:     403C 3B                        PSHD
  143:     403D 16 022C                   jsr f5
  144:     4040 3A                        PULD
  145:     4041 3A                        PULD
  146:                                    
  147:     4042 16 0231                   jsr f6
  148:                                    ;Do things with B
  149:                                    
  150:     4045 B6 0218                   LDAA byteArg
  151:     4048 36                        PSHA
  152:     4049 3B                        PSHD
  153:     404A 16 0232                   jsr f7
  154:     404D 3A                        PULD ;Return value
  155:     404E 1B81                      ins ;Removing A without pulling, hopefully.
  156:                                    
  157:     4050 FC 0219                   LDD wordArg
  158:     4053 16 0237                   jsr f8
  159:                                    
  160:     4056 B6 021B                   LDAA byteArg1
  161:     4059 F6 021C                   LDAB byteArg2
  162:     405C 37                        PSHB
  163:     405D 36                        PSHA
  164:     405E 16 0238                   jsr f9
  165:     4061 1B81                      ins
  166:     4063 1B81                      ins
  167:                                    
  168:     4065 FC 021F                   LDD wordArg2
  169:     4068 3B                        PSHD
  170:     4069 FC 021D                   LDD wordArg1
  171:     406C 3B                        PSHD
  172:     406D 1B9F                      DES
  173:     406F 16 023D                   jsr f10
  174:     4072 32                        PULA
  175:                                    
  176:     4073 1B81                      ins
  177:     4075 1B81                      ins
  178:     4077 1B81                      ins
  179:     4079 1B81                      ins
  180:                                 
  181:                                 
  182:     407B FC 021F                   LDD wordArg2
  183:     407E 3B                        PSHD
  184:     407F CC 021B                   LDD #byteArg1
  185:     4082 3B                        PSHD
  186:     4083 16 0244                   jsr f11
  187:                                    
  188:     4086 1B81                      ins
  189:     4088 1B81                      ins
  190:     408A 1B81                      ins
  191:     408C 1B81                      ins
  192:                                    
  193:                                    
  194:     408E B6 021C                   LDAA byteArg2
  195:     4091 36                        PSHA 
  196:     4092 CC 021D                   LDD #wordArg1
  197:     4095 3B                        PSHD
  198:     4096 16 0249                   jsr f12
  199:                                    
  200:     4099 1B81                      ins
  201:     409B 1B81                      ins
  202:     409D 1B81                      ins
  203:                                    
  204:                                    
  205:                                    
  206:                                    END

Symbols:
bytearg                         *00000218
bytearg1                        *0000021b
bytearg2                        *0000021c
f1                              *00000224
f10                             *0000023d
f11                             *00000244
f12                             *00000249
f2                              *00000225
f3                              *00000226
f4                              *00000229
f5                              *0000022c
f6                              *00000231
f7                              *00000232
f8                              *00000237
f9                              *00000238
loopingntozero                  *00004012
newarray                        *00000200
newwordarray                    *00000208
testthing                       *00000008
wordarg                         *00000219
wordarg1                        *0000021d
wordarg2                        *0000021f

